/* ✅ FULL: src/components/home/services/Services.module.scss */

/* =========================
   SERVICES — Seamless + Hover/Tap Flip
   ========================= */

.section {
  --night-blue: 16, 34, 60;
  /* default overlay if card var not set yet */
  --frontOverlay: 0.55;

  position: relative;
  color: #fff;
  margin-block: 0;
  background: transparent;
  border-radius: 0;
  box-shadow: none;
  padding: clamp(48px, 8vw, 120px) 24px clamp(64px, 10vw, 140px);
  opacity: 0;
  transform: translateY(24px);
  transition: opacity 0.7s ease, transform 0.7s ease;
}

.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Head */
.head {
  max-width: 1160px;
  margin: 0 auto 22px;
}

.kicker {
  display: inline-block;
  font-size: 12px;
  letter-spacing: 0.22em;
  color: #bfbfbf;
  text-transform: uppercase;
  border: 1px solid rgba(255, 255, 255, 0.08);
  padding: 8px 14px;
  border-radius: 999px;
  backdrop-filter: blur(2px);
}

.title {
  margin: 12px 0 8px;
  font-size: clamp(28px, 5vw, 56px);
  line-height: 1.04;
  font-weight: 800;
  letter-spacing: -0.02em;
  text-wrap: balance;
  text-shadow: 0 0 24px rgba(255, 255, 255, 0.08);
}

.lead {
  color: #e7e7e7;
  opacity: 0.9;
  max-width: 700px;
  font-size: clamp(14px, 1.35vw, 18px);
  line-height: 1.6;
}

/* Hint row (Tap vs Hover text) */
.mobileHint {
  max-width: 1160px;
  margin: 6px auto 4px;
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: rgba(226, 232, 240, 0.82);
  opacity: 0.85;
  display: none;
}

.mobileHintTap {
  display: inline;
}

.mobileHintHover {
  display: none;
}

/* Grid */
.grid {
  max-width: 1160px;
  margin: 18px auto 10px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: clamp(14px, 2.5vw, 24px);

  @media (max-width: 900px) {
    grid-template-columns: 1fr;
  }
}

/* Card with tilt */
.card {
  position: relative;
  border-radius: 24px;
  overflow: visible;
  isolation: isolate;
  perspective: 1200px;
  transform: rotateX(var(--tiltX, 0deg)) rotateY(var(--tiltY, 0deg));
  transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
}

/* ✅ Base closed height; open uses --openH (desktop) */
.cardInner {
  position: relative;
  border-radius: 24px;
  overflow: hidden;

  /* closed */
  min-height: min(60vw, 460px);

  border: 1.5px solid rgba(255, 255, 255, 0.10);
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.08),
    0 12px 30px rgba(0, 0, 0, 0.65),
    0 0 20px rgba(229, 215, 167, 0.06);

  transition:
    min-height 260ms cubic-bezier(0.2, 0.8, 0.2, 1),
    box-shadow 0.2s ease,
    border-color 0.2s ease;
}

/* Hover (desktop) or flipped (mobile baseline) */
.card:hover .cardInner,
.cardInnerActive {
  min-height: var(--openH, 560px);

  border-color: rgba(255, 255, 255, 0.16);
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.12),
    0 16px 40px rgba(0, 0, 0, 0.75),
    0 0 26px rgba(229, 215, 167, 0.10);
}

/* Faces */
.face {
  position: absolute;
  inset: 0;
  display: grid;
  opacity: 0;
  transform: translateY(6px) scale(0.98);
  transition: opacity 0.35s ease, transform 0.35s ease;
}

.front {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

.back {
  pointer-events: none;
}

/* ACTIVE state */
.cardInnerActive .front {
  opacity: 0;
  transform: translateY(-4px) scale(0.98);
  pointer-events: none;
}

.cardInnerActive .back {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

/* Media */
.media {
  position: absolute;
  inset: 0;
  background-position: center center;
  background-repeat: no-repeat;
  background-size: cover;

  will-change: transform;
  transform: translateZ(0);

  filter: saturate(1.06) contrast(1.06);
}

/* Optional: slightly reframe image when open so it "fills" better */
.card:hover .media,
.cardInnerActive .media {
  background-position: center 35%;
}

/* ✅ Glow layer (keeps your nice highlight, DOES NOT control darkness) */
.scrimGlow {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;

  background: radial-gradient(
    140% 80% at var(--glowX, 50%) var(--glowY, 50%),
    rgba(255, 255, 255, 0.22),
    transparent 42%
  );

  mix-blend-mode: screen;
}

/* ✅ Darkness layer (THIS is what the slider controls) */
.scrim {
  position: absolute;
  inset: 0;
  z-index: 2;
  pointer-events: none;

  /* Stronger & actually dark (no screen blend) */
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, calc(0.20 + (var(--frontOverlay, 0.55) * 0.40))) 0%,
    rgba(0, 0, 0, calc(0.40 + (var(--frontOverlay, 0.55) * 0.85))) 55%,
    rgba(0, 0, 0, calc(0.62 + (var(--frontOverlay, 0.55) * 1.20))) 100%
  );

  mix-blend-mode: normal;
}

/* Back scrim — readable on ANY image */
.scrimBack {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  mix-blend-mode: normal;

  background:
    radial-gradient(
      120% 85% at 30% 0%,
      rgba(231, 215, 167, 0.14),
      transparent 60%
    ),
    linear-gradient(
      180deg,
      rgba(2, 6, 16, 0.48) 0%,
      rgba(2, 6, 16, 0.72) 55%,
      rgba(2, 6, 16, 0.88) 100%
    );
}

/* Content */
.info {
  position: relative;
  z-index: 3; /* ✅ above glow + darkness */
  display: grid;
  gap: 10px;
  padding: clamp(18px, 3.5vw, 28px);
  align-content: end; /* front wants this */
}

/* ✅ Back content: start from top */
.back .info {
  align-content: start;
  padding-bottom: 22px;
}

.tag {
  display: inline-block;
  font-size: 11px;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: #111;
  background: #fff;
  padding: 6px 10px;
  border-radius: 999px;
  width: fit-content;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.cardTitle {
  font-size: clamp(22px, 3.5vw, 40px);
  font-weight: 900;
  line-height: 1.1;
}

.blurb {
  color: #efefef;
  line-height: 1.65;
  max-width: 62ch;
  opacity: 0.96;
}

.includesBox {
  margin-top: 10px;
  padding: 10px 2px 0;
  border-radius: 0;
  border: none;
  background: transparent;
  box-shadow: none;
  backdrop-filter: none;
}

.includesTitle {
  font-size: 0.78rem;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  color: rgba(231, 215, 167, 0.92);
  margin-bottom: 10px;
}

.includesList {
  margin: 0;
  padding-left: 1.1rem;
  display: grid;
  gap: 10px;
  color: #f3f4f6;

  li {
    line-height: 1.45;
  }
}

/* Actions */
.actions {
  margin-top: 4px;
}

/* Flip hints */
.flipHint {
  margin-top: 8px;
  font-size: 0.78rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: rgba(226, 232, 240, 0.78);
  opacity: 0.9;
}

.flipHintTap {
  display: inline;
}

.flipHintHover {
  display: none;
}

/* Buttons */
.cta,
.ctaSecondary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 48px;
  padding: 0 20px;
  border-radius: 999px;
  font-weight: 900;
  letter-spacing: 0.02em;
  text-decoration: none;
  border: 1px solid rgba(0, 0, 0, 0.08);
  box-shadow:
    0 10px 28px rgba(0, 0, 0, 0.35),
    inset 0 -2px 0 rgba(0, 0, 0, 0.12);
  transition: transform 0.08s ease, filter 0.15s ease;
}

.cta {
  background: #e7d7a7;
  color: #0b0b0b;
}

.ctaSecondary {
  background: rgba(255, 255, 255, 0.06);
  color: #fff;
  border-color: rgba(255, 255, 255, 0.26);
  box-shadow:
    0 10px 24px rgba(0, 0, 0, 0.5),
    inset 0 0 0 1px rgba(255, 255, 255, 0.06);
}

.cta:hover,
.ctaSecondary:hover {
  filter: brightness(1.04);
  transform: translateY(-1px);
}

.cta:active,
.ctaSecondary:active {
  transform: translateY(0);
}

.vignette {
  display: none;
}

.noPanel {
  background: transparent;
  box-shadow: none;
  border-radius: 0;
  padding-top: clamp(32px, 6vw, 56px);
}

/* =========================
   ✅ MOBILE FIX: expand by content height on tap
   (desktop hover stays identical)
   ========================= */
@media (max-width: 900px) {
  .section {
    padding-inline: 16px;
  }

  .head {
    margin-bottom: 16px;
  }

  .mobileHint {
    display: block;
  }

  .cardInner {
    min-height: 460px;
  }

  /* ✅ The key fix: on mobile, don’t force openH — let content define height */
  .cardInnerActive {
    min-height: unset; /* content-driven */
    height: auto;
  }

  /* ✅ Make the active face participate in layout so the card actually grows */
  .cardInnerActive .face {
    position: relative;
    inset: auto;
  }

  /* ✅ Hide front entirely (removes invisible overlay space issues) */
  .cardInnerActive .front {
    display: none;
  }

  /* ✅ Show back as the only content */
  .cardInnerActive .back {
    display: grid;
    opacity: 1;
    transform: none;
    pointer-events: auto;
  }

  .flipHint {
    font-size: 0.72rem;
    letter-spacing: 0.14em;
  }
}

/* Desktop: show hover copy */
@media (min-width: 901px) {
  .mobileHint {
    display: block;
    text-align: right;
  }

  .mobileHintTap {
    display: none;
  }

  .mobileHintHover {
    display: inline;
  }

  .flipHintTap {
    display: none;
  }

  .flipHintHover {
    display: inline;
  }
}
